!function(a,b,c){var d=function(a,b,c,e){var f=function(a,b,c,d){var e=arguments[arguments.length-1];return"function"!=typeof e&&"[object Object]"!==Object.prototype.toString.call(e)?f.get(a,e):(f.set(a,b,c,d),void 0)};for(var g in d.prototype)f[g]=d.prototype[g];return f.getManager=function(){return a},f.getFactory=function(){return b},f.getNamespace=function(){return c},f.getMeta=function(){return e},f};d.prototype={get:function(a,b){if(a=this.resolveName(a),!a)throw new Error('Clazz with name "'+a+'" does not exits!');b=b||[];var c=this.getManager(),d=this.getFactory();if(!c.hasClazz(a,b)){var e=c.getMeta(a);c.setClazz(d.create({name:a,dependencies:b,process:this.adjustMetaProcessors(e.process),parent:this.adjustParent(e.parent),meta:e.meta}))}return c.getClazz(a,b)},has:function(a){return!!this.resolveName(a)},set:function(a,b,c,d){var e=this.getNamespace(),f=this.getManager();return"object"==typeof a?(b=a.parent,c=a.process,d=a.meta,a=a.name):("undefined"==typeof d&&(d=c,c=null),"undefined"==typeof d&&(d=b,b=null),"[object Array]"===Object.prototype.toString.call(b)&&(c=b,b=null)),a=e.apply(a),f.setMeta(a,{parent:b,process:c,meta:d}),this},resolveName:function(a){var b,c,d,e,f=this.getManager(),g=this.getNamespace();for(b=g.getPaths(),d=0,e=b.length;e>d;++d)if(c=g.apply(a,b[d]),f.hasMeta(c))return c;return!1},adjustParent:function(a){return"string"==typeof a&&(a=[a]),"[object Array]"===Object.prototype.toString.call(a)&&(a=this.get(a[0],a[1]||[])),a},adjustMetaProcessors:function(a){var b,c,d={},e,f,g;for(e in a){if(-1===["clazz","proto"].indexOf(e))throw new Error('Incorrect meta processor type "'+e+'"!');for(d[e]=[],f=a[e],"[object Array]"!==Object.prototype.toString.call(f)&&(f=[f]),b=0,c=f.length;c>b;++b)g=f[b],"string"==typeof g&&(g=this.getMeta().processor(g)),d[e][b].push(g)}return d}};var e=function(a,b,c,f,g,h,i){i=i||d;var j=function(d,f){var g=new e(a,b,j,d,h),k=new i(a,b,j,c);return f&&f(g,k),k};return j.getManager=function(){return a},j.getFactory=function(){return b},j.getMeta=function(){return c},j.getBaseNamespace=function(){return f},j.getGlobal=function(){return h},j.getPath=function(){return e.adjust((f?f.getPath():e.GLOBAL)+e.getDelimiter()+g)},j.getPaths=function(){var a=this.getPath();return-1===a.indexOf(e.GLOBAL)&&a.push(e.GLOBAL),[this.getPath()]},j.apply=function(a,b){return e.adjust((b||this.getPath())+e.getDelimiter()+a)},j};e.GLOBAL="GLOBAL",e.DEFAULT_DELIMITER=".",e.DELIMITERS=["\\","/","_","-","."],e._delimiter=null,e.setDelimiter=function(a){if(!(a in this.DELIMITERS))throw new Error("Unsupported delimiter")},e.getDelimiter=function(){return this._delimiter||this.DEFAULT_DELIMITER},e.adjust=function(a){var b="[\\"+this.DELIMITERS.join("\\")+"]";return a.replace(new RegExp(b+"+","g"),this.getDelimiter()).replace(new RegExp("^"+b+"|"+b+"$"),"")};var f=function(){if(this.uid=++f.uid,"function"==typeof this.init){var a=this.init.apply(this,Array.prototype.slice.call(arguments));if("undefined"!=typeof a)return a}};f.NAME="__BASE_CLAZZ__",f.DEPENDENCIES=[],f.uid=0,f.parent=null,f.create=function(){var a=arguments;return new this(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10])},f.prototype={parent:null,clazz:f};var g=function(a){this._clazzUID=0,this.BaseClazz=a};g.prototype={DEFAULT_PROCESSORS:{clazz:["Clazz.Clazz"],proto:["Clazz.Proto"]},CLASS_NAME:"Clazz{uid}",create:function(a){var b=a.name||this.generateName(),c=a.parent,d=a.process||[this.DEFAULT_PROCESSORS],e=a.meta,f=a.dependencies||[],g=this.createClazz(b,c);return g.DEPENDENCIES=f,e&&this.applyMeta(g,e,d),g},createClazz:function(a,b){b||(b=this.BaseClazz);var d=function(){var a=b.apply(this,Array.prototype.slice.call(arguments));return"undefined"!=typeof a?a:void 0};for(var e in b)"function"==typeof b[e]?d[e]=b[e]:"_"===e[0]&&(d[e]=c);return d.NAME=a||this.generateName(),d.parent=b,d.prototype=Object.create(b.prototype),d.prototype.clazz=d,d.prototype.parent=b.prototype,d},applyMeta:function(a,b,c){if("function"==typeof b&&(b=b.apply(a,dependencies)),"clazz"in c)for(var d=0,e=c.clazz.length;e>d;++d)c.clazz[d].process(a,b);if("proto"in c)for(var d=0,e=c.proto.length;e>d;++d)c.proto[d].process(a.prototype,b)},generateName:function(){return this.CLASS_NAME.replace("{uid}",++this._clazzUID)}};var h=function(){this._clazz={},this._meta={}};h.prototype={setMeta:function(a,b){return this._meta[a]=b,this},hasMeta:function(a){return a in this._meta},getMeta:function(a){if(!this.hasMeta(a))throw new Error('Meta does not exists for "'+a+'"!');return this._meta[a]},getClazz:function(a,b){var c,d,e,f,g,h;if(g=this._clazz[a],"[object Array]"===Object.prototype.toString.apply(g))for(b||(b=[]),c=0,d=g.length;d>c;++c){for(h=!0,e=0,f=g[c].DEPENDENCIES.length;f>e;++e)if(g[c].DEPENDENCIES[e]!==b[e]){h=!1;break}if(h)return g[c]}throw new Error('Clazz "'+a+'" does not exists!')},hasClazz:function(a,b){var c,d,e,f,g,h;if(g=this._clazz[a],"[object Array]"===Object.prototype.toString.apply(g)){if(!b)return!0;for(c=0,d=g.length;d>c;++c){for(h=!0,e=0,f=g[c].DEPENDENCIES.length;f>e;++e)if(g[c].DEPENDENCIES[e]!==b[e]){h=!1;break}if(h)return!0}}return!1},setClazz:function(a,b){if("function"==typeof a&&(b=a,a=b.NAME),"function"!=typeof b)throw new Error("Clazz must be a function!");return a in this._clazz||(this._clazz[a]=[]),this._clazz[a].push(b),this}},b.processor("Clazz.Clazz","Meta.Options",{constants:"Clazz.Constants",clazz_properties:"Clazz.Properties",clazz_methods:"Clazz.Methods"}),b.processor("Clazz.Constants","Meta.Chain",{init:"Clazz.Constants.Init","interface":"Clazz.Constants.Interface"}),b.processor("Clazz.Constants.Init",function(a,b){a.__constants={};for(var c in b)a.__constants[c]=b[c]}),b.processor("ClazzJS.Constants.Interface","Meta.Interface",{"const":function(a){return this.__getConstant(a)},__getConstant:function(a,b){var c=this;if("undefined"==typeof b&&(b=c.__getConstants()),"undefined"!=typeof a){if(!(a in b))throw new Error('Constant "'+a+'" does not defined!');if(b=b[a],"[object Object]"===Object.prototype.toString.apply(b))return function(a){return c.__getConstant(a,b)}}return b},__getConstants:function(){for(var a={},b=this;b;){if(b.hasOwnProperty("__constants"))for(var c in b.__constants)c in a||(a[c]=b.__constants[c]);b=b.parent}return a}}),b.processor("Clazz.Methods",function(a,b){if("function"==typeof a&&a.parent)for(var c in a.parent)"function"==typeof a.parent[c]&&(a[c]=a.parent[c]);for(var c in b){if("function"!=typeof b[c])throw new Error('Method "'+c+'" must be a function!');a[c]=b[c]}}),b.processor("Clazz.Properties","Meta.Chain",{init:"ClazzJS.Properties.Init","interface":"ClazzJS.Properties.Interface",meta:"ClazzJS.Properties.Meta",defaults:"ClazzJS.Properties.Defaults"}),b.processor("ClazzJS.Properties.Defaults",{process:function(a){var b,c,d,e=a.__properties;for(d in e)c=e[d]["default"],"undefined"==typeof c&&(b=e[d].type,"undefined"!=typeof b&&b in this.DEFAULT&&(c=this.DEFAULT[b])),a["_"+d]=this.copy(c)},copy:function(a){var b,c=Object.prototype.toString.apply(a);if("object"!=typeof a)b=a;else if("[object Date]"===c)b=new Date(a.getTime());else if("[object Array]"===c){b=[];for(var d=0,e=a.length;e>d;++d)b[d]=this.copy(a[d])}else if("[object RegExp]"===c)b=new RegExp(a.source);else{b={};for(var f in a)b[f]=this.copy(a[f])}return b},DEFAULT:{hash:{},array:[]}}),b.processor("Clazz.Properties.Init",function(a,b){for(var d in b)a["_"+d]=c}),b.processor("Clazz.Properties.Interface","Meta.Interface",{__setters:{},__getters:{},__properties:{},init:function(a){this.__setData(a)},__setProperties:function(a){for(var b in a)this.__setProperty(b,a[b]);return this},__getProperties:function(){return this.__properties},__setProperty:function(a,b,c){if(a=this.__adjustPropertyName(a),"undefined"==typeof this.__properties[a]&&(this.__properties[a]={}),{}.constructor===b.constructor)for(var d in b)this.__properties[a][d]=b[d];else this.__properties[a][b]=c;return this},__getProperty:function(a,b){return"undefined"==typeof b?this.__properties[a]:this.__properties[a]&&this.__properties[a][b]},__hasProperty:function(a){return a=this.__adjustPropertyName(a),"_"+a in this&&"function"!=typeof this["_"+a]},__adjustPropertyName:function(a){return a.replace(/(?:_)\w/,function(a){return a[1].toUpperCase()})},__setData:function(a){for(var b in a)this.__hasProperty(b)&&this.__setPropertyValue(b,a[b]);return this},__getPropertyValue:function(a){var b,c,d,e,f;if(a=this.__adjustPropertyName(a),!this.__hasProperty(a))throw new Error("Can't get! Property \""+a+'" does not exists!');f=this["_"+a],b=this.__getGetters(a);for(e in b)f=b[e].call(this,f);var g="[object Array]"===Object.prototype.toString.call(arguments[1])?arguments[1]:Array.prototype.slice.call(arguments,1);for(c=0,d=g.length;d>c;++c)f=f[g[c]];return f},__setPropertyValue:function(a){var b,c,d,e,f,g,h=arguments[arguments.length-1];if(a=this.__adjustPropertyName(a),!this.__hasProperty(a))throw new Error("Can't set! Property \""+a+'" does not exists!');if(f="[object Array]"===Object.prototype.toString.call(arguments[1])?arguments[1]:Array.prototype.slice.call(arguments,1,-1),f&&f.length){for(g=this["_"+a],c=0,d=f.length-1;d>c;++c)f[c]in g||(g[f[c]]={}),g=g[f[c]];g[f[c]]=h}else g=h;b=this.__getSetters(a);for(e in b)g=b[e].call(this,g);return this["_"+a]=g,this},__isPropertyValue:function(a){var b="[object Array]"===Object.prototype.toString.apply(arguments[1])?arguments[1]:Array.prototype.slice.call(arguments,1),c=this.__getPropertyValue(a,b),d=arguments[arguments.length-1];return"undefined"!=typeof c?c==d:!!c},__hasPropertyValue:function(a){var b="[object Array]"===Object.prototype.toString.apply(arguments[1])?arguments[1]:Array.prototype.slice.call(arguments,1),c=this.__getPropertyValue(a,b);if("[object Object]"===Object.prototype.toString.apply(c)){for(var d in c)return!0;return!1}return!("undefined"==typeof this[c]||null===c||"string"==typeof c&&""===c||"[object Array]"===Object.prototype.toString.apply(c)&&0===c.length)},__addSetter:function(a,b,c){if("undefined"==typeof c&&(c=b,b=0),"function"!=typeof c)throw new Error("Set callback must be a function!");return a in this.__setters||(this.__setters[a]=[]),this.__setters[a].push([b,c]),this},__getSetters:function(a){for(var b,c,d,e,f={},g=this.clazz.prototype;g;){if(g.hasOwnProperty("__setters"))for(e in g.__setters)e in f||(f[e]=g.__setters[e]);g=g.parent}if("undefined"!=typeof a){if(d=[],a in f&&f[a].length)for(f[a].sort(function(a,b){return b[0]-a[0]}),b=0,c=f[a].length;c>b;++b)d.push(f[a][b][1])}else d=f;return d},__addGetter:function(a,b,c){if("undefined"==typeof c&&(c=b,b=0),"function"!=typeof c)throw new Error("Get callback must be a function!");return a in this.__getters||(this.__getters[a]=[]),this.__getters[a].push([b,c]),this},__getGetters:function(a){for(var b,c,d,e,f={},g=this.clazz.prototype;g;){if(g.hasOwnProperty("__getters"))for(d in g.__getters)d in f||(f[d]=g.__getters[d]);g=g.parent}if("undefined"!=typeof a){if(e=[],a in f&&f[a].length)for(f[a].sort(function(a,b){return b[0]-a[0]}),b=0,c=f[a].length;c>b;++b)e.push(f[a][b][1])}else e=f;return e}}),b.processor("Clazz.Properties.Meta",function(a,c){for(var d in c){var e=c[d];"[object Array]"===Object.prototype.toString.call(e)?c[d]=e=3===e.length?{type:[e[0],e[2]],"default":e[1]}:{type:e}:("object"!=typeof e||null===e)&&(c[d]=e={"default":e}),"methods"in e||(e.methods=["get","set","has","is"]),b.processor("Clazz.Property").process(a,e,d)}}),b.processor("Clazz.Property","Meta.Options",{type:"Clazz.Property.Type","default":"Clazz.Property.Default",methods:"Clazz.Property.Methods",converters:"Clazz.Property.Converters",constraints:"Clazz.Property.Constraints"}),b.processor("Clazz.Property.Constraints",function(a,b,c){a.__addSetter(c,function(a){for(var c in b)if(!b[c].call(this,a))throw new Error('Constraint "'+c+'" was failed!');return a})}),b.processor("Clazz.Property.Converters",function(a,b,c){a.__addSetter(c,1e3,function(a){for(var c in b)a=b[c].call(this,a);return a})}),b.processor("Clazz.Property.Default",function(a,b,c){"function"==typeof b&&(b=b()),a.__setProperty(c,"default",b)}),b.processor("Clazz.Property.Methods",{process:function(a,b,c){"[object Array]"!==Object.prototype.toString.apply(b)&&(b=[b]);for(var d=0,e=b.length;e>d;++d)this.addMethod(b[d],a,c)},addMethod:function(a,b,c){var d=this.createMethod(a,c);b[d.name]=d.body},createMethod:function(a,b){if(!(a in this.METHODS))throw new Error('Unsupported method "'+a+'"!');var c=this.METHODS[a](b);return"function"==typeof c&&(c={name:a+b[0].toUpperCase()+b.slice(1),body:c}),c},METHODS:{get:function(a){return function(){return this.__getPropertyValue.apply(this,[a].concat(Array.prototype.slice.call(arguments)))}},set:function(a){return function(b){return this.__setPropertyValue.apply(this,[a].concat(Array.prototype.slice.call(arguments)))}},is:function(a){return{name:(0!==a.indexOf("is")?"is":"")+a[0].toUpperCase()+a.slice(1),body:function(){return this.__isPropertyValue.apply(this,[a].concat(Array.prototype.slice.call(arguments)))}}},has:function(a){return function(){return this.__hasPropertyValue.apply(this,[a].concat(Array.prototype.slice.call(arguments)))}}}}),b.processor("Clazz.Property.Type",{process:function(a,b,c){var d=this,e={};if("[object Array]"===Object.prototype.toString.apply(b)&&(e=b[1]||[],b=b[0]),!(b in this.TYPES))throw new Error('Unsupported property type "'+b+'"!');a.__setProperty(c,"type",b),a.__addSetter(c,function(a){return d.checkValue(a,b,e)})},checkValue:function(a,b,c){return this.TYPES[b].call(this,a,c)},TYPES:{"boolean":function(a){return Boolean(a)},number:function(a,b){if(a=Number(a),"min"in b&&a<b.min)throw new Error('Value "'+a+'" must not be less then "'+b.min+'"!');if("max"in b&&a>b.max)throw new Error('Value "'+a+'" must not be greater then "'+b.max+'"!');return a},string:function(a,b){if(a=String(a),"pattern"in b&&!b.pattern.test(a))throw new Error('Value "'+a+'" does not match pattern "'+b.pattern+'"!');if("variants"in b&&-1===b.variants.indexOf(a))throw new Error('Value "'+a+'" must be one of "'+b.variants.join(", ")+'"!');return a},datetime:function(a){return a instanceof Date||(a=new Date(Date.parse(a))),a},object:function(a,b){if("object"!=typeof a||Object.prototype.toString.call(a))throw new Error("Incorrect value: not object type");if("instanceof"in b){var c=b.instanceof;if("[object Array]"===Object.prototype.toString.call(c)&&(c=d(c[0],c[1]||[])),!(a instanceof c))throw new Error('Value does not instance of clazz "'+c.NAME+'"!')}return a},array:function(a,b){return"string"==typeof a?a.split(b.delimiter||","):[].concat(a)},hash:function(a,b){if({}.constructor!==a.constructor)throw new Error("Incorrect value: not hash type!");if("keys"in b)for(var c in a)if(!(c in b.keys))throw new Error('Unsupported hash key "'+c+'"!');return"element"in b&&this.checkValue.apply(this,[].concat(b.element)),a}}}),b.processor("Clazz.Proto","Meta.Options",{properties:"Clazz.Properties",methods:"Clazz.Methods"}),function(a,b){var c=new g(f),i=new h,j=new e(i,c,b,null,"",a,d),k=j();a.namespace=j,a.clazz=k}(a,b)}(this,meta);
//# sourceMappingURL=dist/ClazzJS.min.map